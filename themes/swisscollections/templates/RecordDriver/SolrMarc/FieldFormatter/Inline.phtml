<?php

namespace SwissCollections\templates\RecordDriver\SolrMarc\FieldFormatter;

use SwissCollections\Formatter\FieldFormatter;
use SwissCollections\Formatter\FieldFormatterData;
use SwissCollections\RecordDriver\FieldRenderContext;

class Inline extends FieldFormatter {

    public function getName(): String {
        return "inline";
    }

    /**
     * @param String $fieldName
     * @param FieldFormatterData[] $fieldDataList
     * @param FieldRenderContext $context
     */
    public function render($fieldName, $fieldDataList, $context): void {
        echo "\t\t<div class='field-value field-value-compound field-value-" . $fieldName . "'>\n";
        foreach ($fieldDataList as $index => $fd) {
            $separator = $this->getSeparator($fd);
            if ($index > 0) {
                echo $separator;
            }
            // echo "\n\t\t\t<!-- marcInfo=" . $fd->renderConfig . " -->\n";
            echo "<span class='field-entry field-entry-" . $fd->renderConfig->labelKey . "'>";
            $this->outputValue($fd);
            echo "</span>";
        }
        echo "\n\t\t</div>\n";
    }

    /**
     * @param FieldFormatterData $fd
     * @return String
     */
    protected function getSeparator($fd): String {
        return $fd->renderConfig->getFormatterConfig()->getSeparator();
    }
}